 - hosts: all
   become: true
   vars:
    ansible_become_pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          36646438663465366530633538396531633837666164303163306564633730633662326635613631
          3931356338663862626130323662323333623331623330370a623439663834653939383565396161
          62386332323633623561306264643263343039623432636431653166386365333862616336333936
          3437386432663263350a343632366533376336306463613935313866636462373261313733626361
          3335

   pre_tasks:

   - name: update repository index (Ubuntu)
     tags: always
     apt:
       update_cache: yes
     changed_when: false
     when: ansible_distribution == "Ubuntu"

 

 - hosts: web_servers
   become: true
   vars:
    ansible_become_pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          36646438663465366530633538396531633837666164303163306564633730633662326635613631
          3931356338663862626130323662323333623331623330370a623439663834653939383565396161
          62386332323633623561306264643263343039623432636431653166386365333862616336333936
          3437386432663263350a343632366533376336306463613935313866636462373261313733626361
          3335
    db_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          30313035626331326566353630363631356361316636383034346331376635663262656361353264
          3565626261346633373866363166636266663766336233320a373234373332643836356237666534
          37343862643635616131326533636336626531353134663933656663623331376664616331666132
          3664643263613562650a653966363766313661366633613065363433373162646238316661383764
          3336

   roles:
     - web_servers
 